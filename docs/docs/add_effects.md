# ADD_EFFECTS API æ¥å£æ–‡æ¡£

## æ¥å£ä¿¡æ¯

```bash
POST /openapi/capcut-mate/v1/add_effects
```

## åŠŸèƒ½æè¿°

å‘ç°æœ‰è‰ç¨¿ä¸­æ·»åŠ è§†é¢‘ç‰¹æ•ˆã€‚è¯¥æ¥å£ç”¨äºåœ¨æŒ‡å®šçš„æ—¶é—´æ®µå†…æ·»åŠ ç‰¹æ•ˆç´ æåˆ°å‰ªæ˜ è‰ç¨¿ä¸­ï¼Œæ”¯æŒå¤šç§ç‰¹æ•ˆç±»å‹å¦‚è¾¹æ¡†ç‰¹æ•ˆã€æ»¤é•œç‰¹æ•ˆã€åŠ¨æ€ç‰¹æ•ˆç­‰ã€‚ç‰¹æ•ˆå¯ä»¥ç”¨äºå¢å¼ºè§†é¢‘çš„è§†è§‰æ•ˆæœã€‚

## æ›´å¤šæ–‡æ¡£

ğŸ“– æ›´å¤šè¯¦ç»†æ–‡æ¡£å’Œæ•™ç¨‹è¯·è®¿é—®ï¼š[https://docs.jcaigc.cn](https://docs.jcaigc.cn)

## è¯·æ±‚å‚æ•°

```json
{
  "draft_url": "https://capcut-mate.jcaigc.cn/openapi/capcut-mate/v1/get_draft?draft_id=2025092811473036584258",
  "effect_infos": "[{\"effect_title\": \"å½•åˆ¶è¾¹æ¡† III\", \"start\": 0, \"end\": 5000000}, {\"effect_title\": \"å¤å¤æ»¤é•œ\", \"start\": 2000000, \"end\": 7000000}]"
}
```

### å‚æ•°è¯´æ˜

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| draft_url | string | âœ… | - | ç›®æ ‡è‰ç¨¿çš„å®Œæ•´URL |
| effect_infos | string | âœ… | - | ç‰¹æ•ˆä¿¡æ¯åˆ—è¡¨çš„JSONå­—ç¬¦ä¸² |

### å‚æ•°è¯¦è§£

#### effect_infos å­—æ®µæ ¼å¼

`effect_infos` æ˜¯ä¸€ä¸ªJSONå­—ç¬¦ä¸²ï¼ŒåŒ…å«ç‰¹æ•ˆä¿¡æ¯æ•°ç»„ï¼Œæ¯ä¸ªç‰¹æ•ˆå¯¹è±¡åŒ…å«ä»¥ä¸‹å­—æ®µï¼š

```json
[
    {
        "effect_title": "å½•åˆ¶è¾¹æ¡† III",  // ç‰¹æ•ˆåç§°/æ ‡é¢˜ï¼Œå¿…é€‰å‚æ•°
        "start": 0,                     // ç‰¹æ•ˆå¼€å§‹æ—¶é—´ï¼ˆå¾®ç§’ï¼‰ï¼Œå¿…é€‰å‚æ•°  
        "end": 5000000                  // ç‰¹æ•ˆç»“æŸæ—¶é—´ï¼ˆå¾®ç§’ï¼‰ï¼Œå¿…é€‰å‚æ•°
    }
]
```

**å­—æ®µè¯´æ˜**:
- `effect_title`: ç‰¹æ•ˆåç§°ï¼Œå¿…é¡»æ˜¯ç³»ç»Ÿä¸­å·²å­˜åœ¨çš„ç‰¹æ•ˆåç§°
- `start`: ç‰¹æ•ˆå¼€å§‹æ—¶é—´ï¼Œå•ä½ä¸ºå¾®ç§’ï¼Œå¿…é¡»å¤§äºç­‰äº0
- `end`: ç‰¹æ•ˆç»“æŸæ—¶é—´ï¼Œå•ä½ä¸ºå¾®ç§’ï¼Œå¿…é¡»å¤§äºstart

#### æ—¶é—´å‚æ•°

- **start**: ç‰¹æ•ˆåœ¨æ—¶é—´è½´ä¸Šçš„å¼€å§‹æ—¶é—´ï¼Œå•ä½ä¸ºå¾®ç§’ï¼ˆ1ç§’ = 1,000,000å¾®ç§’ï¼‰
- **end**: ç‰¹æ•ˆåœ¨æ—¶é—´è½´ä¸Šçš„ç»“æŸæ—¶é—´ï¼Œå•ä½ä¸ºå¾®ç§’
- **duration**: ç‰¹æ•ˆæ˜¾ç¤ºæ—¶é•¿ = end - start

#### ç‰¹æ•ˆåç§°è¯´æ˜

- **effect_title**: ç‰¹æ•ˆçš„åç§°
  - æ ¼å¼ï¼šå­—ç¬¦ä¸²
  - ç¤ºä¾‹ï¼š`"å½•åˆ¶è¾¹æ¡† III"`
  - è·å–æ–¹å¼ï¼šé€šè¿‡å‰ªæ˜ ç‰¹æ•ˆåº“æˆ–ç›¸å…³APIè·å–
  - å¸¸è§ç‰¹æ•ˆåç§°ï¼š
    - è¾¹æ¡†ç‰¹æ•ˆï¼š"å½•åˆ¶è¾¹æ¡† III", "ç®€çº¦è¾¹æ¡†", "éœ“è™¹è¾¹æ¡†"
    - æ»¤é•œç‰¹æ•ˆï¼š"å¤å¤æ»¤é•œ", "é»‘ç™½æ»¤é•œ", "æš–è‰²è°ƒ"
    - åŠ¨æ€ç‰¹æ•ˆï¼š"ç²’å­æ•ˆæœ", "å…‰æ™•æ•ˆæœ", "é—ªçƒç‰¹æ•ˆ"
    - è½¬åœºç‰¹æ•ˆï¼š"æ·¡å…¥æ·¡å‡º", "æ¨æ‹‰é—¨", "é©¬èµ›å…‹è½¬åœº"

## å“åº”æ ¼å¼

### æˆåŠŸå“åº” (200)

```json
{
  "draft_url": "https://capcut-mate.jcaigc.cn/openapi/capcut-mate/v1/get_draft?draft_id=2025092811473036584258",
  "track_id": "effect_track_123",
  "effect_ids": ["effect_001", "effect_002"],
  "segment_ids": ["seg_001", "seg_002"]
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| draft_url | string | æ›´æ–°åçš„è‰ç¨¿URL |
| track_id | string | ç‰¹æ•ˆè½¨é“ID |
| effect_ids | array | æ·»åŠ çš„ç‰¹æ•ˆIDåˆ—è¡¨ |
| segment_ids | array | åˆ›å»ºçš„ç‰¹æ•ˆç‰‡æ®µIDåˆ—è¡¨ |

### é”™è¯¯å“åº” (4xx/5xx)

```json
{
  "detail": "é”™è¯¯ä¿¡æ¯æè¿°"
}
```

## ä½¿ç”¨ç¤ºä¾‹

### cURL ç¤ºä¾‹

#### 1. åŸºæœ¬ç‰¹æ•ˆæ·»åŠ 

```bash
curl -X POST https://capcut-mate.jcaigc.cn/openapi/capcut-mate/v1/add_effects \
  -H "Content-Type: application/json" \
  -d '{
    "draft_url": "YOUR_DRAFT_URL",
    "effect_infos": "[{\"effect_title\": \"å½•åˆ¶è¾¹æ¡† III\", \"start\": 0, \"end\": 5000000}]"
  }'
```

#### 2. æ‰¹é‡ç‰¹æ•ˆæ·»åŠ 

```bash
curl -X POST https://capcut-mate.jcaigc.cn/openapi/capcut-mate/v1/add_effects \
  -H "Content-Type: application/json" \
  -d '{
    "draft_url": "YOUR_DRAFT_URL",
    "effect_infos": "[{\"effect_title\": \"å½•åˆ¶è¾¹æ¡† III\", \"start\": 0, \"end\": 5000000}, {\"effect_title\": \"å¤å¤æ»¤é•œ\", \"start\": 2000000, \"end\": 7000000}]"
  }'
```

## é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|--------|----------|------|----------|
| 400 | draft_urlæ˜¯å¿…å¡«é¡¹ | ç¼ºå°‘è‰ç¨¿URLå‚æ•° | æä¾›æœ‰æ•ˆçš„draft_url |
| 400 | effect_infosæ˜¯å¿…å¡«é¡¹ | ç¼ºå°‘ç‰¹æ•ˆä¿¡æ¯å‚æ•° | æä¾›æœ‰æ•ˆçš„effect_infos |
| 400 | æ—¶é—´èŒƒå›´æ— æ•ˆ | endå¿…é¡»å¤§äºstart | ç¡®ä¿ç»“æŸæ—¶é—´å¤§äºå¼€å§‹æ—¶é—´ |
| 400 | æ— æ•ˆçš„ç‰¹æ•ˆä¿¡æ¯ï¼Œè¯·æ£€æŸ¥effect_infoså­—æ®µå€¼æ˜¯å¦æ­£ç¡® | ç‰¹æ•ˆå‚æ•°æ ¡éªŒå¤±è´¥ | æ£€æŸ¥ç‰¹æ•ˆå‚æ•°æ˜¯å¦ç¬¦åˆè¦æ±‚ |
| 404 | è‰ç¨¿ä¸å­˜åœ¨ | æŒ‡å®šçš„è‰ç¨¿URLæ— æ•ˆ | æ£€æŸ¥è‰ç¨¿URLæ˜¯å¦æ­£ç¡® |
| 404 | ç‰¹æ•ˆä¸å­˜åœ¨ | æŒ‡å®šçš„ç‰¹æ•ˆåç§°æ— æ•ˆ | ç¡®è®¤ç‰¹æ•ˆåç§°æ˜¯å¦æ­£ç¡® |
| 500 | ç‰¹æ•ˆæ·»åŠ å¤±è´¥ | å†…éƒ¨å¤„ç†é”™è¯¯ | è”ç³»æŠ€æœ¯æ”¯æŒ |

## æ³¨æ„äº‹é¡¹

1. **æ—¶é—´å•ä½**: æ‰€æœ‰æ—¶é—´å‚æ•°ä½¿ç”¨å¾®ç§’ï¼ˆ1ç§’ = 1,000,000å¾®ç§’ï¼‰
2. **ç‰¹æ•ˆåç§°**: ç¡®ä¿ä½¿ç”¨æœ‰æ•ˆçš„ç‰¹æ•ˆåç§°
3. **æ—¶é—´èŒƒå›´**: endå¿…é¡»å¤§äºstart
4. **è½¨é“ç®¡ç†**: ç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºç‰¹æ•ˆè½¨é“
5. **æ€§èƒ½è€ƒè™‘**: é¿å…åŒæ—¶æ·»åŠ å¤§é‡ç‰¹æ•ˆ

## å·¥ä½œæµç¨‹

1. éªŒè¯å¿…å¡«å‚æ•°ï¼ˆdraft_url, effect_infosï¼‰
2. æ£€æŸ¥æ—¶é—´èŒƒå›´çš„æœ‰æ•ˆæ€§
3. ä»ç¼“å­˜ä¸­è·å–è‰ç¨¿
4. åˆ›å»ºç‰¹æ•ˆè½¨é“ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
5. è§£æç‰¹æ•ˆä¿¡æ¯å¹¶åˆ›å»ºç‰¹æ•ˆç‰‡æ®µ
6. æ·»åŠ ç‰‡æ®µåˆ°è½¨é“
7. ä¿å­˜è‰ç¨¿
8. è¿”å›ç‰¹æ•ˆä¿¡æ¯

## ç›¸å…³æ¥å£

- [åˆ›å»ºè‰ç¨¿](./create_draft.md)
- [æ·»åŠ è§†é¢‘](./add_videos.md)
- [æ·»åŠ éŸ³é¢‘](./add_audios.md)
- [æ·»åŠ å›¾ç‰‡](./add_images.md)
- [ä¿å­˜è‰ç¨¿](./save_draft.md)
- [ç”Ÿæˆè§†é¢‘](./gen_video.md)

---

<div align="right">

ğŸ“š **é¡¹ç›®èµ„æº**  
**GitHub**: [https://github.com/Hommy-master/capcut-mate](https://github.com/Hommy-master/capcut-mate)  
**Gitee**: [https://gitee.com/taohongmin-gitee/capcut-mate](https://gitee.com/taohongmin-gitee/capcut-mate)

</div>