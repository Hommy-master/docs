# ADD_MASKS API æ¥å£æ–‡æ¡£

## æ¥å£ä¿¡æ¯

```
POST /openapi/capcut-mate/v1/add_masks
```

## åŠŸèƒ½æè¿°

å‘ç°æœ‰è‰ç¨¿ä¸­çš„æŒ‡å®šç‰‡æ®µæ·»åŠ é®ç½©æ•ˆæœã€‚é®ç½©æ˜¯è§†é¢‘ç¼–è¾‘ä¸­çš„é‡è¦åŠŸèƒ½ï¼Œé€šè¿‡é®ç½©å¯ä»¥æ§åˆ¶å›¾åƒçš„å¯è§åŒºåŸŸï¼Œåˆ›é€ å‡ºå„ç§è§†è§‰æ•ˆæœã€‚æ”¯æŒå¤šç§é®ç½©ç±»å‹ï¼ˆçº¿æ€§ã€é•œé¢ã€åœ†å½¢ã€çŸ©å½¢ã€çˆ±å¿ƒã€æ˜Ÿå½¢ï¼‰ï¼Œæ¯ç§é®ç½©éƒ½å¯ä»¥ç²¾ç¡®é…ç½®ä½ç½®ã€å¤§å°ã€ç¾½åŒ–ã€æ—‹è½¬ç­‰å±æ€§ã€‚

## æ›´å¤šæ–‡æ¡£

ğŸ“– æ›´å¤šè¯¦ç»†æ–‡æ¡£å’Œæ•™ç¨‹è¯·è®¿é—®ï¼š[https://docs.jcaigc.cn](https://docs.jcaigc.cn)

## è¯·æ±‚å‚æ•°

```json
{
  "draft_url": "https://capcut-mate.jcaigc.cn/openapi/capcut-mate/v1/get_draft?draft_id=2025092811473036584258",
  "segment_ids": ["d62994b4-25fe-422a-a123-87ef05038558"],
  "name": "åœ†å½¢",
  "X": 100,
  "Y": 200,
  "width": 300,
  "height": 300,
  "feather": 20,
  "rotation": 0,
  "invert": false,
  "roundCorner": 0
}
```

### å‚æ•°è¯´æ˜

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| draft_url | string | âœ… | "" | ç›®æ ‡è‰ç¨¿çš„å®Œæ•´URL |
| segment_ids | array | âœ… | [] | è¦åº”ç”¨é®ç½©çš„ç‰‡æ®µIDæ•°ç»„ |
| name | string | âŒ | "çº¿æ€§" | é®ç½©ç±»å‹åç§° |
| X | integer | âŒ | 0 | é®ç½©ä¸­å¿ƒXåæ ‡ï¼ˆåƒç´ ï¼‰ |
| Y | integer | âŒ | 0 | é®ç½©ä¸­å¿ƒYåæ ‡ï¼ˆåƒç´ ï¼‰ |
| width | integer | âŒ | 512 | é®ç½©å®½åº¦ï¼ˆåƒç´ ï¼‰ |
| height | integer | âŒ | 512 | é®ç½©é«˜åº¦ï¼ˆåƒç´ ï¼‰ |
| feather | integer | âŒ | 0 | ç¾½åŒ–ç¨‹åº¦ï¼ˆ0-100ï¼‰ |
| rotation | integer | âŒ | 0 | æ—‹è½¬è§’åº¦ï¼ˆåº¦ï¼‰ |
| invert | boolean | âŒ | false | æ˜¯å¦åè½¬é®ç½© |
| roundCorner | integer | âŒ | 0 | åœ†è§’åŠå¾„ï¼ˆ0-100ï¼‰ |

### å‚æ•°è¯¦è§£

#### é®ç½©ç±»å‹å‚æ•°

- **name**: é®ç½©ç±»å‹åç§°
  - å¯é€‰å€¼ï¼šçº¿æ€§ã€é•œé¢ã€åœ†å½¢ã€çŸ©å½¢ã€çˆ±å¿ƒã€æ˜Ÿå½¢
  - é»˜è®¤å€¼ï¼šçº¿æ€§

#### ä½ç½®å‚æ•°

- **X**: é®ç½©ä¸­å¿ƒXåæ ‡ï¼ˆåƒç´ ï¼‰
  - æ­£å€¼å‘å³ç§»åŠ¨
  - è´Ÿå€¼å‘å·¦ç§»åŠ¨
  - ä»¥ç´ æä¸­å¿ƒä¸ºåŸç‚¹

- **Y**: é®ç½©ä¸­å¿ƒYåæ ‡ï¼ˆåƒç´ ï¼‰
  - æ­£å€¼å‘ä¸‹ç§»åŠ¨
  - è´Ÿå€¼å‘ä¸Šç§»åŠ¨
  - ä»¥ç´ æä¸­å¿ƒä¸ºåŸç‚¹

#### å°ºå¯¸å‚æ•°

- **width**: é®ç½©å®½åº¦ï¼ˆåƒç´ ï¼‰
  - é»˜è®¤å€¼ï¼š512
  - å»ºè®®èŒƒå›´ï¼š1-2048

- **height**: é®ç½©é«˜åº¦ï¼ˆåƒç´ ï¼‰
  - é»˜è®¤å€¼ï¼š512
  - å»ºè®®èŒƒå›´ï¼š1-2048

#### æ•ˆæœå‚æ•°

- **feather**: ç¾½åŒ–ç¨‹åº¦ï¼ˆ0-100ï¼‰
  - 0 = æ— ç¾½åŒ–ï¼ˆé”åˆ©è¾¹ç¼˜ï¼‰
  - 100 = æœ€å¤§ç¾½åŒ–ï¼ˆæŸ”å’Œè¾¹ç¼˜ï¼‰
  - é»˜è®¤å€¼ï¼š0

- **rotation**: æ—‹è½¬è§’åº¦ï¼ˆåº¦ï¼‰
  - 0-360åº¦èŒƒå›´
  - é»˜è®¤å€¼ï¼š0

- **invert**: æ˜¯å¦åè½¬é®ç½©
  - true = åè½¬é®ç½©æ•ˆæœ
  - false = æ­£å¸¸é®ç½©æ•ˆæœ
  - é»˜è®¤å€¼ï¼šfalse

- **roundCorner**: åœ†è§’åŠå¾„ï¼ˆ0-100ï¼‰
  - ä»…å¯¹çŸ©å½¢é®ç½©æœ‰æ•ˆ
  - 0 = æ— åœ†è§’ï¼ˆç›´è§’ï¼‰
  - 100 = æœ€å¤§åœ†è§’
  - é»˜è®¤å€¼ï¼š0

#### ç‰‡æ®µIDå‚æ•°

- **segment_ids**: è¦åº”ç”¨é®ç½©çš„ç‰‡æ®µIDæ•°ç»„
  - å¿…é¡»æ˜¯è§†é¢‘ç‰‡æ®µID
  - æ”¯æŒæ‰¹é‡å¤„ç†å¤šä¸ªç‰‡æ®µ
  - æ¯ä¸ªç‰‡æ®µåªèƒ½æ·»åŠ ä¸€ä¸ªé®ç½©

## å“åº”æ ¼å¼

### æˆåŠŸå“åº” (200)

```json
{
  "draft_url": "https://capcut-mate.jcaigc.cn/openapi/capcut-mate/v1/get_draft?draft_id=2025092811473036584258",
  "masks_added": 1,
  "affected_segments": ["d62994b4-25fe-422a-a123-87ef05038558"],
  "mask_ids": ["mask_001"]
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| draft_url | string | æ›´æ–°åçš„è‰ç¨¿URL |
| masks_added | number | æˆåŠŸæ·»åŠ çš„é®ç½©æ•°é‡ |
| affected_segments | array | å—å½±å“çš„ç‰‡æ®µIDåˆ—è¡¨ |
| mask_ids | array | é®ç½©IDåˆ—è¡¨ |

### é”™è¯¯å“åº” (4xx/5xx)

```json
{
  "detail": "é”™è¯¯ä¿¡æ¯æè¿°"
}
```

## ä½¿ç”¨ç¤ºä¾‹

### cURL ç¤ºä¾‹

#### 1. åŸºæœ¬é®ç½©æ·»åŠ 

```bash
curl -X POST https://capcut-mate.jcaigc.cn/openapi/capcut-mate/v1/add_masks \
  -H "Content-Type: application/json" \
  -d '{
    "draft_url": "YOUR_DRAFT_URL",
    "segment_ids": ["SEGMENT_ID"],
    "name": "åœ†å½¢"
  }'
```

#### 2. å¸¦ä½ç½®å’Œå°ºå¯¸çš„é®ç½©

```bash
curl -X POST https://capcut-mate.jcaigc.cn/openapi/capcut-mate/v1/add_masks \
  -H "Content-Type: application/json" \
  -d '{
    "draft_url": "YOUR_DRAFT_URL",
    "segment_ids": ["SEGMENT_ID"],
    "name": "çŸ©å½¢",
    "X": 100,
    "Y": 50,
    "width": 400,
    "height": 300
  }'
```

#### 3. å¸¦æ•ˆæœå‚æ•°çš„é®ç½©

```bash
curl -X POST https://capcut-mate.jcaigc.cn/openapi/capcut-mate/v1/add_masks \
  -H "Content-Type: application/json" \
  -d '{
    "draft_url": "YOUR_DRAFT_URL",
    "segment_ids": ["SEGMENT_ID"],
    "name": "çº¿æ€§",
    "feather": 30,
    "rotation": 45,
    "invert": true
  }'
```

#### 4. çŸ©å½¢é®ç½©å¸¦åœ†è§’

```bash
curl -X POST https://capcut-mate.jcaigc.cn/openapi/capcut-mate/v1/add_masks \
  -H "Content-Type: application/json" \
  -d '{
    "draft_url": "YOUR_DRAFT_URL",
    "segment_ids": ["SEGMENT_ID"],
    "name": "çŸ©å½¢",
    "roundCorner": 50
  }'
```

## é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|--------|----------|------|----------|
| 400 | draft_urlæ˜¯å¿…å¡«é¡¹ | ç¼ºå°‘è‰ç¨¿URLå‚æ•° | æä¾›æœ‰æ•ˆçš„draft_url |
| 400 | segment_idsæ˜¯å¿…å¡«é¡¹ | ç¼ºå°‘ç‰‡æ®µIDå‚æ•° | æä¾›æœ‰æ•ˆçš„segment_idsæ•°ç»„ |
| 400 | æ— æ•ˆçš„é®ç½©ä¿¡æ¯ï¼Œè¯·æ£€æŸ¥é®ç½©å‚æ•°æ˜¯å¦æ­£ç¡® | é®ç½©å‚æ•°æ ¡éªŒå¤±è´¥ | æ£€æŸ¥é®ç½©å‚æ•°æ˜¯å¦ç¬¦åˆè¦æ±‚ |
| 400 | ç¾½åŒ–ç¨‹åº¦æ— æ•ˆ | featherè¶…å‡ºèŒƒå›´ | ä½¿ç”¨0-100èŒƒå›´å†…çš„ç¾½åŒ–å€¼ |
| 400 | æ—‹è½¬è§’åº¦æ— æ•ˆ | rotationè¶…å‡ºèŒƒå›´ | ä½¿ç”¨0-360èŒƒå›´å†…çš„è§’åº¦å€¼ |
| 400 | åœ†è§’åŠå¾„æ— æ•ˆ | roundCornerè¶…å‡ºèŒƒå›´ | ä½¿ç”¨0-100èŒƒå›´å†…çš„åœ†è§’å€¼ |
| 404 | è‰ç¨¿ä¸å­˜åœ¨ | æŒ‡å®šçš„è‰ç¨¿URLæ— æ•ˆ | æ£€æŸ¥è‰ç¨¿URLæ˜¯å¦æ­£ç¡® |
| 404 | ç‰‡æ®µæœªæ‰¾åˆ° | æŒ‡å®šçš„ç‰‡æ®µIDä¸å­˜åœ¨ | ç¡®è®¤ç‰‡æ®µIDæ˜¯å¦æ­£ç¡® |
| 400 | æ— æ•ˆçš„ç‰‡æ®µç±»å‹ | ç‰‡æ®µç±»å‹ä¸æ”¯æŒæ·»åŠ é®ç½© | ç¡®ä¿ä½¿ç”¨è§†é¢‘ç‰‡æ®µID |
| 404 | é®ç½©ç±»å‹æœªæ‰¾åˆ° | æŒ‡å®šçš„é®ç½©åç§°ä¸å­˜åœ¨ | ä½¿ç”¨æœ‰æ•ˆçš„é®ç½©ç±»å‹åç§° |
| 500 | é®ç½©æ·»åŠ å¤±è´¥ | å†…éƒ¨å¤„ç†é”™è¯¯ | è”ç³»æŠ€æœ¯æ”¯æŒ |

## æ³¨æ„äº‹é¡¹

1. **ç‰‡æ®µè¦æ±‚**: åªæœ‰è§†é¢‘ç‰‡æ®µï¼ˆVideoSegmentï¼‰æ”¯æŒæ·»åŠ é®ç½©
2. **é®ç½©é™åˆ¶**: æ¯ä¸ªç‰‡æ®µåªèƒ½æ·»åŠ ä¸€ä¸ªé®ç½©ï¼Œé‡å¤æ·»åŠ ä¸ä¼šæŠ¥é”™ï¼Œä¼šè¿”å›ç°æœ‰é®ç½©ä¿¡æ¯
3. **åæ ‡ç³»ç»Ÿ**: Xã€Yåæ ‡ä»¥åƒç´ ä¸ºå•ä½ï¼ŒåŸç‚¹ä½äºç´ æä¸­å¿ƒ
4. **å‚æ•°èŒƒå›´**: 
   - feather: 0-100ï¼Œç¾½åŒ–ç¨‹åº¦
   - rotation: 0-360åº¦ï¼Œæ—‹è½¬è§’åº¦
   - roundCorner: 0-100ï¼Œåœ†è§’åŠå¾„ï¼ˆä»…çŸ©å½¢é®ç½©æœ‰æ•ˆï¼‰
5. **æ‰¹é‡å¤„ç†**: æ”¯æŒåŒæ—¶ä¸ºå¤šä¸ªç‰‡æ®µæ·»åŠ ç›¸åŒé…ç½®çš„é®ç½©
6. **é®ç½©ç±»å‹**: æ”¯æŒçº¿æ€§ã€é•œé¢ã€åœ†å½¢ã€çŸ©å½¢ã€çˆ±å¿ƒã€æ˜Ÿå½¢å…­ç§é®ç½©ç±»å‹
7. **æ€§èƒ½è€ƒè™‘**: é¿å…åŒæ—¶æ·»åŠ å¤§é‡é®ç½©

## å·¥ä½œæµç¨‹

1. éªŒè¯å¿…å¡«å‚æ•°ï¼ˆdraft_url, segment_idsï¼‰
2. æ£€æŸ¥ç‰‡æ®µIDçš„æœ‰æ•ˆæ€§
3. ä»ç¼“å­˜ä¸­è·å–è‰ç¨¿
4. æŸ¥æ‰¾å¹¶éªŒè¯é®ç½©ç±»å‹
5. ä¸ºæ¯ä¸ªç‰‡æ®µæ·»åŠ é®ç½©
6. ä¿å­˜è‰ç¨¿
7. è¿”å›é®ç½©ä¿¡æ¯

## ç›¸å…³æ¥å£

- [åˆ›å»ºè‰ç¨¿](./create_draft.md)
- [æ·»åŠ è§†é¢‘](./add_videos.md)
- [æ·»åŠ éŸ³é¢‘](./add_audios.md)
- [æ·»åŠ å›¾ç‰‡](./add_images.md)
- [ä¿å­˜è‰ç¨¿](./save_draft.md)
- [ç”Ÿæˆè§†é¢‘](./gen_video.md)

---

<div align="right">

ğŸ“š **é¡¹ç›®èµ„æº**  
**GitHub**: [https://github.com/Hommy-master/capcut-mate](https://github.com/Hommy-master/capcut-mate)  
**Gitee**: [https://gitee.com/taohongmin-gitee/capcut-mate](https://gitee.com/taohongmin-gitee/capcut-mate)

</div>