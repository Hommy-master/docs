# ADD_KEYFRAMES API æ¥å£æ–‡æ¡£

## æ¥å£ä¿¡æ¯

``` 
POST /openapi/capcut-mate/v1/add_keyframes
```

## åŠŸèƒ½æè¿°

å‘ç°æœ‰è‰ç¨¿ä¸­æ·»åŠ å…³é”®å¸§ã€‚è¯¥æ¥å£ç”¨äºåœ¨æŒ‡å®šçš„ç‰‡æ®µä¸Šæ·»åŠ å…³é”®å¸§åŠ¨ç”»ï¼Œæ”¯æŒå¤šç§å±æ€§ç±»å‹çš„å…³é”®å¸§è®¾ç½®ï¼Œå¦‚ä½ç½®ã€ç¼©æ”¾ã€æ—‹è½¬ã€é€æ˜åº¦ç­‰ã€‚å…³é”®å¸§å¯ä»¥ç”¨äºåˆ›å»ºå¤æ‚çš„åŠ¨ç”»æ•ˆæœï¼Œå¢å¼ºè§†é¢‘çš„è§†è§‰è¡¨ç°åŠ›ã€‚

## æ›´å¤šæ–‡æ¡£

ğŸ“– æ›´å¤šè¯¦ç»†æ–‡æ¡£å’Œæ•™ç¨‹è¯·è®¿é—®ï¼š[https://docs.jcaigc.cn](https://docs.jcaigc.cn)

## è¯·æ±‚å‚æ•°

```json
{
  "draft_url": "https://capcut-mate.jcaigc.cn/openapi/capcut-mate/v1/get_draft?draft_id=2025092811473036584258",
  "keyframes": "[{\"segment_id\":\"d62994b4-25fe-422a-a123-87ef05038558\",\"property\":\"KFTypePositionX\",\"offset\":0.5,\"value\":-0.1}]"
}
```

### å‚æ•°è¯´æ˜

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| draft_url | string | âœ… | - | ç›®æ ‡è‰ç¨¿çš„å®Œæ•´URL |
| keyframes | string | âœ… | - | å…³é”®å¸§ä¿¡æ¯åˆ—è¡¨çš„JSONå­—ç¬¦ä¸² |

### keyframes å‚æ•°è¯¦è§£

#### åŸºæœ¬ç»“æ„
keyframes æ˜¯ä¸€ä¸ªJSONå­—ç¬¦ä¸²ï¼ŒåŒ…å«å…³é”®å¸§æ•°ç»„ï¼Œæ¯ä¸ªå…³é”®å¸§å¯¹è±¡åŒ…å«ä»¥ä¸‹å­—æ®µï¼š

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| segment_id | string | âœ… | ç›®æ ‡ç‰‡æ®µçš„å”¯ä¸€æ ‡è¯†ID |
| property | string | âœ… | åŠ¨ç”»å±æ€§ç±»å‹ï¼Œæ”¯æŒçš„ç±»å‹è§ä¸‹è¡¨ |
| offset | number | âœ… | å…³é”®å¸§åœ¨ç‰‡æ®µä¸­çš„æ—¶é—´åç§»ï¼ˆ0-1èŒƒå›´ï¼Œ0è¡¨ç¤ºå¼€å§‹ï¼Œ1è¡¨ç¤ºç»“æŸï¼‰ |
| value | number | âœ… | å±æ€§åœ¨è¯¥æ—¶é—´ç‚¹çš„å€¼ |

#### æ”¯æŒçš„åŠ¨ç”»å±æ€§ç±»å‹

| å±æ€§ç±»å‹ | æè¿° | å€¼èŒƒå›´ | ç¤ºä¾‹ |
|---------|------|--------|------|
| KFTypePositionX | Xè½´ä½ç½® | -1.0 åˆ° 1.0 | 0.0 (å±…ä¸­), -0.5 (å·¦ç§»), 0.5 (å³ç§») |
| KFTypePositionY | Yè½´ä½ç½® | -1.0 åˆ° 1.0 | 0.0 (å±…ä¸­), -0.5 (ä¸Šç§»), 0.5 (ä¸‹ç§») |
| KFTypeScaleX | Xè½´ç¼©æ”¾ | 0.1 åˆ° 10.0 | 1.0 (åŸå§‹), 0.5 (ç¼©å°), 2.0 (æ”¾å¤§) |
| KFTypeScaleY | Yè½´ç¼©æ”¾ | 0.1 åˆ° 10.0 | 1.0 (åŸå§‹), 0.5 (ç¼©å°), 2.0 (æ”¾å¤§) |
| KFTypeRotation | æ—‹è½¬è§’åº¦ | -360 åˆ° 360 | 0 (æ— æ—‹è½¬), 90 (é¡ºæ—¶é’ˆ90åº¦) |
| KFTypeAlpha | é€æ˜åº¦ | 0.0 åˆ° 1.0 | 1.0 (ä¸é€æ˜), 0.5 (åŠé€æ˜), 0.0 (é€æ˜) |

## å“åº”æ ¼å¼

### æˆåŠŸå“åº” (200)

```json
{
  "draft_url": "https://capcut-mate.jcaigc.cn/openapi/capcut-mate/v1/get_draft?draft_id=2025092811473036584258",
  "keyframes_added": 3,
  "affected_segments": ["segment_001", "segment_002"]
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| draft_url | string | æ›´æ–°åçš„è‰ç¨¿URL |
| keyframes_added | integer | æ·»åŠ çš„å…³é”®å¸§æ•°é‡ |
| affected_segments | array | å—å½±å“çš„ç‰‡æ®µIDåˆ—è¡¨ |

### é”™è¯¯å“åº” (4xx/5xx)

```json
{
  "detail": "é”™è¯¯ä¿¡æ¯æè¿°"
}
```

## ä½¿ç”¨ç¤ºä¾‹

### cURL ç¤ºä¾‹

#### 1. åŸºæœ¬å…³é”®å¸§æ·»åŠ 

```bash
curl -X POST https://capcut-mate.jcaigc.cn/openapi/capcut-mate/v1/add_keyframes \
  -H "Content-Type: application/json" \
  -d '{
    "draft_url": "YOUR_DRAFT_URL",
    "keyframes": "[{\"segment_id\":\"d62994b4-25fe-422a-a123-87ef05038558\",\"property\":\"KFTypePositionX\",\"offset\":0,\"value\":0},{\"segment_id\":\"d62994b4-25fe-422a-a123-87ef05038558\",\"property\":\"KFTypePositionX\",\"offset\":1,\"value\":-0.5}]"
  }'
```

#### 2. å¤šå±æ€§å…³é”®å¸§

```bash
curl -X POST https://capcut-mate.jcaigc.cn/openapi/capcut-mate/v1/add_keyframes \
  -H "Content-Type: application/json" \
  -d '{
    "draft_url": "YOUR_DRAFT_URL",
    "keyframes": "[{\"segment_id\":\"segment-uuid\",\"property\":\"KFTypePositionX\",\"offset\":0,\"value\":0},{\"segment_id\":\"segment-uuid\",\"property\":\"KFTypePositionY\",\"offset\":0,\"value\":0},{\"segment_id\":\"segment-uuid\",\"property\":\"KFTypeRotation\",\"offset\":0.5,\"value\":90},{\"segment_id\":\"segment-uuid\",\"property\":\"KFTypeAlpha\",\"offset\":1,\"value\":0}]"
  }'
```

## é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|--------|----------|------|----------|
| 400 | draft_urlæ˜¯å¿…å¡«é¡¹ | ç¼ºå°‘è‰ç¨¿URLå‚æ•° | æä¾›æœ‰æ•ˆçš„draft_url |
| 400 | keyframesæ˜¯å¿…å¡«é¡¹ | ç¼ºå°‘å…³é”®å¸§å‚æ•° | æä¾›æœ‰æ•ˆçš„keyframesæ•°æ® |
| 400 | æ— æ•ˆçš„å…³é”®å¸§ä¿¡æ¯ï¼Œè¯·æ£€æŸ¥keyframeså­—æ®µå€¼æ˜¯å¦æ­£ç¡® | å…³é”®å¸§æ•°æ®æ ¼å¼é”™è¯¯ | æ£€æŸ¥å…³é”®å¸§æ•°æ®æ ¼å¼æ˜¯å¦ç¬¦åˆè¦æ±‚ |
| 404 | è‰ç¨¿ä¸å­˜åœ¨ | æŒ‡å®šçš„è‰ç¨¿URLæ— æ•ˆ | æ£€æŸ¥è‰ç¨¿URLæ˜¯å¦æ­£ç¡® |
| 404 | ç‰‡æ®µæœªæ‰¾åˆ° | æŒ‡å®šçš„segment_idåœ¨è‰ç¨¿ä¸­ä¸å­˜åœ¨ | ç¡®è®¤ç‰‡æ®µIDæ˜¯å¦æ­£ç¡® |
| 400 | æ— æ•ˆçš„ç‰‡æ®µç±»å‹ | è¯¥ç‰‡æ®µä¸æ”¯æŒå…³é”®å¸§åŠŸèƒ½ | ç¡®ä¿ä¸ºç›®æ ‡ç‰‡æ®µæ˜¯è§†è§‰ç‰‡æ®µï¼ˆè§†é¢‘ã€å›¾ç‰‡ã€è´´çº¸ã€æ–‡æœ¬ï¼‰ |
| 400 | æ— æ•ˆçš„å…³é”®å¸§å±æ€§ç±»å‹ | æŒ‡å®šçš„propertyç±»å‹ä¸å—æ”¯æŒ | æ£€æŸ¥å±æ€§ç±»å‹æ˜¯å¦åœ¨æ”¯æŒåˆ—è¡¨ä¸­ |
| 500 | å…³é”®å¸§æ·»åŠ å¤±è´¥ | å†…éƒ¨å¤„ç†é”™è¯¯ | è”ç³»æŠ€æœ¯æ”¯æŒ |

## æ³¨æ„äº‹é¡¹

1. **ç‰‡æ®µIDéªŒè¯**: segment_id å¿…é¡»æ˜¯è‰ç¨¿ä¸­å­˜åœ¨çš„æœ‰æ•ˆç‰‡æ®µID
2. **ç‰‡æ®µç±»å‹é™åˆ¶**: åªæœ‰è§†è§‰ç‰‡æ®µï¼ˆè§†é¢‘ã€å›¾ç‰‡ã€è´´çº¸ã€æ–‡æœ¬ï¼‰æ”¯æŒå…³é”®å¸§
3. **æ—¶é—´åç§»èŒƒå›´**: offset å€¼å¿…é¡»åœ¨ 0.0-1.0 èŒƒå›´å†…
4. **å±æ€§å€¼èŒƒå›´**: ä¸åŒçš„å±æ€§ç±»å‹æœ‰ä¸åŒçš„å€¼èŒƒå›´é™åˆ¶
5. **é‡å¤å…³é”®å¸§**: ç›¸åŒç‰‡æ®µç›¸åŒå±æ€§çš„å…³é”®å¸§ä¼šè¢«ç´¯åŠ ï¼Œä¸ä¼šè¦†ç›–
6. **æ€§èƒ½è€ƒè™‘**: å•æ¬¡è¯·æ±‚å»ºè®®ä¸è¶…è¿‡100ä¸ªå…³é”®å¸§
7. **ç¼©æ”¾å±æ€§**: è®¾ç½®KFTypeScaleXæˆ–KFTypeScaleYä¼šè‡ªåŠ¨å–æ¶ˆé”å®šXYè½´ç¼©æ”¾æ¯”ä¾‹

## å·¥ä½œæµç¨‹

1. éªŒè¯å¿…å¡«å‚æ•°ï¼ˆdraft_url, keyframesï¼‰
2. è§£æå…³é”®å¸§æ•°æ®JSONå­—ç¬¦ä¸²
3. ä»ç¼“å­˜ä¸­è·å–è‰ç¨¿
4. éªŒè¯æ¯ä¸ªå…³é”®å¸§æ•°æ®çš„æœ‰æ•ˆæ€§
5. æŸ¥æ‰¾ç›®æ ‡ç‰‡æ®µå¹¶éªŒè¯ç‰‡æ®µç±»å‹
6. ä¸ºæ¯ä¸ªå…³é”®å¸§åˆ›å»ºå…³é”®å¸§åˆ—è¡¨å¹¶æ·»åŠ åˆ°ç‰‡æ®µ
7. ä¿å­˜è‰ç¨¿
8. è¿”å›æ·»åŠ ç»“æœä¿¡æ¯

## ç›¸å…³æ¥å£

- [åˆ›å»ºè‰ç¨¿](./create_draft.md)
- [æ·»åŠ è§†é¢‘](./add_videos.md)
- [æ·»åŠ éŸ³é¢‘](./add_audios.md)
- [æ·»åŠ å›¾ç‰‡](./add_images.md)
- [ä¿å­˜è‰ç¨¿](./save_draft.md)
- [ç”Ÿæˆè§†é¢‘](./gen_video.md)

---

<div align="right">

ğŸ“š **é¡¹ç›®èµ„æº**  
**GitHub**: [https://github.com/Hommy-master/capcut-mate](https://github.com/Hommy-master/capcut-mate)  
**Gitee**: [https://gitee.com/taohongmin-gitee/capcut-mate](https://gitee.com/taohongmin-gitee/capcut-mate)

</div>