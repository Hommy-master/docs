# ADD_IMAGES API æ¥å£æ–‡æ¡£

## æ¥å£ä¿¡æ¯

```
POST /openapi/capcut-mate/v1/add_images
```

## åŠŸèƒ½æè¿°

å‘ç°æœ‰è‰ç¨¿ä¸­æ·»åŠ å›¾ç‰‡ã€‚è¯¥æ¥å£ç”¨äºåœ¨æŒ‡å®šçš„æ—¶é—´æ®µå†…æ·»åŠ å›¾ç‰‡ç´ æåˆ°å‰ªæ˜ è‰ç¨¿ä¸­ï¼Œæ”¯æŒå›¾ç‰‡çš„é€æ˜åº¦ã€ç¼©æ”¾å’Œä½ç½®è°ƒæ•´ã€‚å›¾ç‰‡å¯ä»¥ç”¨äºå¢å¼ºè§†é¢‘çš„è§†è§‰æ•ˆæœï¼Œå¦‚èƒŒæ™¯å›¾ã€æ°´å°ã€è£…é¥°å›¾ç­‰ã€‚

## æ›´å¤šæ–‡æ¡£

ğŸ“– æ›´å¤šè¯¦ç»†æ–‡æ¡£å’Œæ•™ç¨‹è¯·è®¿é—®ï¼š[https://docs.jcaigc.cn](https://docs.jcaigc.cn)

## è¯·æ±‚å‚æ•°

```json
{
  "draft_url": "https://capcut-mate.jcaigc.cn/openapi/capcut-mate/v1/get_draft?draft_id=2025092811473036584258",
  "image_infos": "[{\"image_url\":\"https://assets.jcaigc.cn/image1.jpg\",\"width\":1920,\"height\":1080,\"start\":0,\"end\":5000000}]",
  "alpha": 1.0,
  "scale_x": 1.0,
  "scale_y": 1.0,
  "transform_x": 0,
  "transform_y": 0
}
```

### å‚æ•°è¯´æ˜

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| draft_url | string | âœ… | - | ç›®æ ‡è‰ç¨¿çš„å®Œæ•´URL |
| image_infos | string | âœ… | - | å›¾ç‰‡ä¿¡æ¯æ•°ç»„çš„JSONå­—ç¬¦ä¸² |
| alpha | number | âŒ | 1.0 | å›¾ç‰‡é€æ˜åº¦ï¼Œå»ºè®®èŒƒå›´[0.0, 1.0] |
| scale_x | number | âŒ | 1.0 | å›¾ç‰‡Xè½´ç¼©æ”¾æ¯”ä¾‹ |
| scale_y | number | âŒ | 1.0 | å›¾ç‰‡Yè½´ç¼©æ”¾æ¯”ä¾‹ |
| transform_x | number | âŒ | 0 | Xè½´ä½ç½®åç§»ï¼ˆåƒç´ ï¼‰ |
| transform_y | number | âŒ | 0 | Yè½´ä½ç½®åç§»ï¼ˆåƒç´ ï¼‰ |

### image_infos æ•°ç»„ç»“æ„

| å­—æ®µå | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| image_url | string | âœ… | - | å›¾ç‰‡æ–‡ä»¶çš„URLåœ°å€ |
| width | number | âœ… | - | å›¾ç‰‡å®½åº¦(åƒç´ ) |
| height | number | âœ… | - | å›¾ç‰‡é«˜åº¦(åƒç´ ) |
| start | number | âœ… | - | å›¾ç‰‡å¼€å§‹æ˜¾ç¤ºæ—¶é—´(å¾®ç§’) |
| end | number | âœ… | - | å›¾ç‰‡ç»“æŸæ˜¾ç¤ºæ—¶é—´(å¾®ç§’) |

### å‚æ•°è¯¦è§£

#### æ—¶é—´å‚æ•°

- **start**: å›¾ç‰‡åœ¨æ—¶é—´è½´ä¸Šçš„å¼€å§‹æ—¶é—´ï¼Œå•ä½ä¸ºå¾®ç§’ï¼ˆ1ç§’ = 1,000,000å¾®ç§’ï¼‰
- **end**: å›¾ç‰‡åœ¨æ—¶é—´è½´ä¸Šçš„ç»“æŸæ—¶é—´ï¼Œå•ä½ä¸ºå¾®ç§’
- **duration**: å›¾ç‰‡æ˜¾ç¤ºæ—¶é•¿ = end - start

#### é€æ˜åº¦å‚æ•°

- **alpha**: å›¾ç‰‡çš„é€æ˜åº¦
  - 1.0 = å®Œå…¨ä¸é€æ˜
  - 0.5 = åŠé€æ˜
  - 0.0 = å®Œå…¨é€æ˜
  - å»ºè®®èŒƒå›´ï¼š0.0 - 1.0

#### ç¼©æ”¾å‚æ•°

- **scale_x**: å›¾ç‰‡åœ¨Xè½´æ–¹å‘çš„ç¼©æ”¾æ¯”ä¾‹
  - 1.0 = åŸå§‹å¤§å°
  - 0.5 = ç¼©å°åˆ°ä¸€åŠ
  - 2.0 = æ”¾å¤§åˆ°ä¸¤å€

- **scale_y**: å›¾ç‰‡åœ¨Yè½´æ–¹å‘çš„ç¼©æ”¾æ¯”ä¾‹
  - 1.0 = åŸå§‹å¤§å°
  - 0.5 = ç¼©å°åˆ°ä¸€åŠ
  - 2.0 = æ”¾å¤§åˆ°ä¸¤å€

#### ä½ç½®å‚æ•°

- **transform_x**: å›¾ç‰‡åœ¨Xè½´æ–¹å‘çš„ä½ç½®åç§»ï¼Œå•ä½ä¸ºåƒç´ 
  - æ­£å€¼å‘å³ç§»åŠ¨
  - è´Ÿå€¼å‘å·¦ç§»åŠ¨
  - ä»¥ç”»å¸ƒä¸­å¿ƒä¸ºåŸç‚¹
  - å®é™…å­˜å‚¨æ—¶ä¼šè½¬æ¢ä¸ºåŠç”»å¸ƒå®½å•ä½ï¼ˆå‡è®¾ç”»å¸ƒå®½åº¦1920ï¼Œå³é™¤ä»¥960ï¼‰

- **transform_y**: å›¾ç‰‡åœ¨Yè½´æ–¹å‘çš„ä½ç½®åç§»ï¼Œå•ä½ä¸ºåƒç´ 
  - æ­£å€¼å‘ä¸‹ç§»åŠ¨
  - è´Ÿå€¼å‘ä¸Šç§»åŠ¨
  - ä»¥ç”»å¸ƒä¸­å¿ƒä¸ºåŸç‚¹
  - å®é™…å­˜å‚¨æ—¶ä¼šè½¬æ¢ä¸ºåŠç”»å¸ƒé«˜å•ä½ï¼ˆå‡è®¾ç”»å¸ƒé«˜åº¦1080ï¼Œå³é™¤ä»¥540ï¼‰

#### å›¾ç‰‡ä¿¡æ¯è¯´æ˜

- **image_url**: å›¾ç‰‡çš„URLåœ°å€
  - æ ¼å¼ï¼šæœ‰æ•ˆçš„å›¾ç‰‡URL
  - ç¤ºä¾‹ï¼š`"https://assets.jcaigc.cn/image1.jpg"`
  - æ”¯æŒæ ¼å¼ï¼šJPGã€PNGç­‰å¸¸è§å›¾ç‰‡æ ¼å¼

- **width/height**: å›¾ç‰‡çš„åŸå§‹å°ºå¯¸
  - ç”¨äºè®¡ç®—ä½ç½®åç§»çš„è½¬æ¢æ¯”ä¾‹
  - å•ä½ï¼šåƒç´ 

## å“åº”æ ¼å¼

### æˆåŠŸå“åº” (200)

```json
{
  "draft_url": "https://capcut-mate.jcaigc.cn/openapi/capcut-mate/v1/get_draft?draft_id=2025092811473036584258",
  "track_id": "video-track-uuid",
  "image_ids": ["image1-uuid", "image2-uuid"],
  "segment_ids": ["segment1-uuid", "segment2-uuid"],
  "segment_infos": [
    {
      "id": "segment1-uuid",
      "start": 0,
      "end": 5000000
    }
  ]
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| draft_url | string | æ›´æ–°åçš„è‰ç¨¿URL |
| track_id | string | è§†é¢‘è½¨é“ID |
| image_ids | array | å›¾ç‰‡IDåˆ—è¡¨ |
| segment_ids | array | ç‰‡æ®µIDåˆ—è¡¨ |
| segment_infos | array | ç‰‡æ®µä¿¡æ¯åˆ—è¡¨ï¼ŒåŒ…å«æ¯ä¸ªç‰‡æ®µçš„IDã€å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´ |

### é”™è¯¯å“åº” (4xx/5xx)

```json
{
  "detail": "é”™è¯¯ä¿¡æ¯æè¿°"
}
```

## ä½¿ç”¨ç¤ºä¾‹

### cURL ç¤ºä¾‹

#### 1. åŸºæœ¬å›¾ç‰‡æ·»åŠ 

```bash
curl -X POST https://capcut-mate.jcaigc.cn/openapi/capcut-mate/v1/add_images \
  -H "Content-Type: application/json" \
  -d '{
    "draft_url": "YOUR_DRAFT_URL",
    "image_infos": "[{\"image_url\":\"https://assets.jcaigc.cn/photo1.jpg\",\"width\":1920,\"height\":1080,\"start\":0,\"end\":5000000}]"
  }'
```

#### 2. å¸¦é€æ˜åº¦çš„å›¾ç‰‡

```bash
curl -X POST https://capcut-mate.jcaigc.cn/openapi/capcut-mate/v1/add_images \
  -H "Content-Type: application/json" \
  -d '{
    "draft_url": "YOUR_DRAFT_URL",
    "image_infos": "[{\"image_url\":\"https://assets.jcaigc.cn/logo.png\",\"width\":800,\"height\":600,\"start\":1000000,\"end\":6000000}]",
    "alpha": 0.8
  }'
```

#### 3. å¸¦ç¼©æ”¾å’Œä½ç½®åç§»çš„å›¾ç‰‡

```bash
curl -X POST https://capcut-mate.jcaigc.cn/openapi/capcut-mate/v1/add_images \
  -H "Content-Type: application/json" \
  -d '{
    "draft_url": "YOUR_DRAFT_URL",
    "image_infos": "[{\"image_url\":\"https://assets.jcaigc.cn/watermark.png\",\"width\":300,\"height\":100,\"start\":2000000,\"end\":7000000}]",
    "scale_x": 0.5,
    "scale_y": 0.5,
    "transform_x": 700,
    "transform_y": -400
  }'
```

## é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|--------|----------|------|----------|
| 400 | draft_urlæ˜¯å¿…å¡«é¡¹ | ç¼ºå°‘è‰ç¨¿URLå‚æ•° | æä¾›æœ‰æ•ˆçš„draft_url |
| 400 | image_infosæ˜¯å¿…å¡«é¡¹ | ç¼ºå°‘å›¾ç‰‡ä¿¡æ¯å‚æ•° | æä¾›æœ‰æ•ˆçš„image_infos |
| 400 | image_urlæ˜¯å¿…å¡«é¡¹ | å›¾ç‰‡URLç¼ºå¤± | ä¸ºæ¯ä¸ªå›¾ç‰‡æä¾›URL |
| 400 | å›¾ç‰‡å°ºå¯¸æ— æ•ˆ | widthæˆ–heightæ— æ•ˆ | æä¾›æ­£æ•°çš„å®½åº¦å’Œé«˜åº¦ |
| 400 | æ—¶é—´èŒƒå›´æ— æ•ˆ | endå¿…é¡»å¤§äºstart | ç¡®ä¿ç»“æŸæ—¶é—´å¤§äºå¼€å§‹æ—¶é—´ |
| 400 | é€æ˜åº¦æ— æ•ˆ | alphaè¶…å‡ºå»ºè®®èŒƒå›´ | ä½¿ç”¨0.0-1.0èŒƒå›´å†…çš„é€æ˜åº¦å€¼ |
| 404 | è‰ç¨¿ä¸å­˜åœ¨ | æŒ‡å®šçš„è‰ç¨¿URLæ— æ•ˆ | æ£€æŸ¥è‰ç¨¿URLæ˜¯å¦æ­£ç¡® |
| 404 | å›¾ç‰‡ä¸å­˜åœ¨ | æŒ‡å®šçš„å›¾ç‰‡URLæ— æ•ˆ | ç¡®è®¤å›¾ç‰‡URLæ˜¯å¦æ­£ç¡® |
| 500 | å›¾ç‰‡æ·»åŠ å¤±è´¥ | å†…éƒ¨å¤„ç†é”™è¯¯ | è”ç³»æŠ€æœ¯æ”¯æŒ |

## æ³¨æ„äº‹é¡¹

1. **æ—¶é—´å•ä½**: æ‰€æœ‰æ—¶é—´å‚æ•°ä½¿ç”¨å¾®ç§’ï¼ˆ1ç§’ = 1,000,000å¾®ç§’ï¼‰
2. **å›¾ç‰‡URL**: ç¡®ä¿ä½¿ç”¨æœ‰æ•ˆçš„å›¾ç‰‡URL
3. **æ—¶é—´èŒƒå›´**: endå¿…é¡»å¤§äºstart
4. **é€æ˜åº¦èŒƒå›´**: alphaå»ºè®®åœ¨0.0-1.0èŒƒå›´å†…
5. **ä½ç½®å‚æ•°**: transform_xå’Œtransform_yå•ä½ä¸ºåƒç´ ï¼Œä½†å†…éƒ¨ä¼šè½¬æ¢ä¸ºåŠç”»å¸ƒå•ä½å­˜å‚¨
   - transform_xè½¬æ¢å…¬å¼ï¼šå®é™…å€¼ / 960ï¼ˆå‡è®¾ç”»å¸ƒå®½åº¦1920ï¼‰
   - transform_yè½¬æ¢å…¬å¼ï¼šå®é™…å€¼ / 540ï¼ˆå‡è®¾ç”»å¸ƒé«˜åº¦1080ï¼‰
6. **è½¨é“ç®¡ç†**: ç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºè§†é¢‘è½¨é“
7. **æ€§èƒ½è€ƒè™‘**: é¿å…åŒæ—¶æ·»åŠ å¤§é‡å›¾ç‰‡

## å·¥ä½œæµç¨‹

1. éªŒè¯å¿…å¡«å‚æ•°ï¼ˆdraft_url, image_infosï¼‰
2. æ£€æŸ¥æ—¶é—´èŒƒå›´çš„æœ‰æ•ˆæ€§
3. ä»ç¼“å­˜ä¸­è·å–è‰ç¨¿
4. åˆ›å»ºè§†é¢‘è½¨é“ï¼ˆå›¾ç‰‡ä½œä¸ºVideoSegmentï¼‰
5. åˆ›å»ºå›¾åƒè°ƒèŠ‚è®¾ç½®
6. åˆ›å»ºå›¾ç‰‡ç‰‡æ®µ
7. æ·»åŠ ç‰‡æ®µåˆ°è½¨é“
8. ä¿å­˜è‰ç¨¿
9. è¿”å›å›¾ç‰‡ä¿¡æ¯

## ç›¸å…³æ¥å£

- [åˆ›å»ºè‰ç¨¿](./create_draft.md)
- [æ·»åŠ è§†é¢‘](./add_videos.md)
- [æ·»åŠ éŸ³é¢‘](./add_audios.md)
- [æ·»åŠ è´´çº¸](./add_sticker.md)
- [ä¿å­˜è‰ç¨¿](./save_draft.md)
- [ç”Ÿæˆè§†é¢‘](./gen_video.md)

---

<div align="right">

ğŸ“š **é¡¹ç›®èµ„æº**  
**GitHub**: [https://github.com/Hommy-master/capcut-mate](https://github.com/Hommy-master/capcut-mate)  
**Gitee**: [https://gitee.com/taohongmin-gitee/capcut-mate](https://gitee.com/taohongmin-gitee/capcut-mate)

</div>